{% extends 'layout.html' %}
{% load static %}
{% block title %}{{ event.title }} Chat - Happening{% endblock %}

{% block navbar %}
<!-- Empty to avoid -->
{% endblock %}
{% block content %}
    <div class="container mx-auto p-4 flex">
        <div class="w-1/4 bg-white p-4 rounded shadow mr-4">
            <h2 class="text-xl font-bold mb-4">Events</h2>
            <ul>
                {% for event in hosted_events %}
                    <li class="mb-2">
                        <a href="#{{ event.id }}" class="block p-2 rounded hover:bg-gray-200">{{ event.title }}</a>
                    </li>
                {% empty %}
                    <li>No hosted events.</li>
                {% endfor %}
            </ul>
            <div class="mt-4">
                <a href="{% url 'home' %}" class="text-blue-500 hover:text-blue-700">Go Back</a>
            </div>
        </div>
        <div class="w-3/4 bg-white p-4 rounded shadow">
            <h2 class="text-2xl font-bold mb-4">{{ event.title }} Group Chat</h2>
            <div class="mb-4">
                <h3 class="text-lg font-semibold">Participants:</h3>
                <ul>
                    {% for participant in participants %}
                        <li>{{ participant.user.username }}</li>
                    {% empty %}
                        <li>No participants yet.</li>
                    {% endfor %}
                </ul>
            </div>
            <div class="mb-4" id="chat-messages">
                <!-- Messages will be added here dynamically later -->
                <p>No messages yet.</p>
            </div>
            <form method="POST" action="">
                {% csrf_token %}
                <textarea name="message" class="w-full p-2 border rounded" placeholder="Type your message..." required></textarea>
                <button type="submit" class="bg-blue-500 text-white p-2 rounded hover:bg-blue-600 mt-2">Send</button>
            </form>
        </div>
    </div>
{% endblock %}